#include <stdio.h>

int main() {
    int n = 5;

    int P[]  = {1, 2, 3, 4, 5};
    int AT[] = {2, 5, 0, 0, 7};
    int BT[] = {2, 6, 4, 7, 4};

    int CT[n], TAT[n], WT[n];
    int time = 0;

    float totalTAT = 0, totalWT = 0;

    // Sort by Arrival Time (Simple Selection Sort)
    for (int i = 0; i < n - 1; i++) {
        for (int j = i + 1; j < n; j++) {
            if (AT[i] > AT[j]) {
                int temp;

                // Swap AT
                temp = AT[i];
                AT[i] = AT[j];
                AT[j] = temp;

                // Swap BT
                temp = BT[i];
                BT[i] = BT[j];
                BT[j] = temp;

                // Swap P
                temp = P[i];
                P[i] = P[j];
                P[j] = temp;
            }
        }
    }

    // Calculate CT, TAT, WT
    for (int i = 0; i < n; i++) {

        if (time < AT[i]) {
            time = AT[i];
        }

        time += BT[i];
        CT[i] = time;

        TAT[i] = CT[i] - AT[i];
        WT[i]  = TAT[i] - BT[i];

        totalTAT += TAT[i];
        totalWT  += WT[i];
    }

    // Print Results
    printf("P\tAT\tBT\tCT\tTAT\tWT\n");

    for (int i = 0; i < n; i++) {
        printf("P%d\t%d\t%d\t%d\t%d\t%d\n",
               P[i], AT[i], BT[i], CT[i], TAT[i], WT[i]);
    }

    printf("\nAverage Turnaround Time = %.2f", totalTAT / n);
    printf("\nAverage Waiting Time = %.2f\n", totalWT / n);

    return 0;
}
